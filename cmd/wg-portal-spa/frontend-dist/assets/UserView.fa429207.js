import{d as H,_ as F,u as E,c as P,r as y,w as M,o as c,a as L,b as U,e as r,M as N,n as $,f as e,g as u,t as s,h as m,v,i as _,j as O,k,F as w,l as D,m as T,p as x,q as A,s as B,x as K}from"./index.b2e243a7.js";const z=H({id:"users",state:()=>({users:[],filter:"",pageSize:10,pageOffset:0,pages:[],fetching:!1}),getters:{Find:t=>o=>t.users.find(h=>h.Identifier===o),Count:t=>t.users.length,FilteredCount:t=>t.Filtered.length,All:t=>t.users,Filtered:t=>t.filter?t.users.filter(o=>o.Firstname.includes(t.filter)||o.Lastname.includes(t.filter)||o.Email.includes(t.filter)||o.Identifier.includes(t.filter)):t.users,FilteredAndPaged:t=>t.Filtered.slice(t.pageOffset,t.pageOffset+t.pageSize),isFetching:t=>t.fetching,hasNextPage:t=>t.pageOffset<t.FilteredCount-t.pageSize,hasPrevPage:t=>t.pageOffset>0,currentPage:t=>t.pageOffset/t.pageSize+1},actions:{afterPageSizeChange(){this.pageOffset=0,this.calculatePages()},calculatePages(){let t=1;this.pages=[];for(let o=0;o<this.FilteredCount;o+=this.pageSize)this.pages.push(t++)},gotoPage(t){this.pageOffset=(t-1)*this.pageSize,this.calculatePages()},nextPage(){this.pageOffset+=this.pageSize,this.calculatePages()},previousPage(){this.pageOffset-=this.pageSize,this.calculatePages()},async fetch(){this.fetching=!0,this.users=[{Identifier:"user0",Email:"tester@test.de",Firstname:"Franz",Lastname:"Tester",Source:"ldap",Peers:19,IsAdmin:!0,Phone:"+436789456",Department:"IT",Active:!0},{Identifier:"user1",Email:"noinfo@nix.de",Firstname:"Simple",Lastname:"User",Source:"db",Peers:3,IsAdmin:!1,Phone:"",Department:"",Active:!1},{Identifier:"another unique id",Email:"Volodimirius.longemail@test.de",Firstname:"Volodimirius",Lastname:"Longnameinus",Source:"ldap",Peers:200,IsAdmin:!0,Phone:"+12345798564897",Department:"Sales Lead",Active:!0}],this.fetching=!1,this.calculatePages()}}}),Y=e("legend",{class:"mt-4"},"General",-1),G={key:0,class:"form-group"},q={class:"form-label mt-4"},j={class:"form-group"},R={class:"form-label mt-4"},W={key:1,class:"form-group"},J={class:"form-label mt-4"},Q=e("small",{id:"passwordHelp",class:"form-text text-muted"},"Leave this field blank to keep current password.",-1),X=e("legend",{class:"mt-4"},"User Information",-1),Z={class:"form-group"},ee={class:"form-label mt-4"},te={class:"row"},se={class:"form-group col-md-6"},le={class:"form-label mt-4"},oe={class:"form-group col-md-6"},ae={class:"form-label mt-4"},ie={class:"row"},ne={class:"form-group col-md-6"},re={class:"form-label mt-4"},de={class:"form-group col-md-6"},ce={class:"form-label mt-4"},ue=e("legend",{class:"mt-4"},"Notes",-1),fe={class:"form-group"},he={class:"form-label mt-4"},pe=e("legend",{class:"mt-4"},"State",-1),me={class:"form-check form-switch"},_e=e("label",{class:"form-check-label"},"Disabled",-1),ve={class:"form-check form-switch"},ge=e("label",{class:"form-check-label"},"Is Admin",-1),be=e("div",{class:"flex-fill text-start"},[e("button",{type:"button",class:"btn btn-danger me-1"},"Delete")],-1),$e=e("button",{type:"button",class:"btn btn-primary me-1"},"Save",-1),ke=["onClick"],Pe={__name:"UserEditModal",props:{userId:String,visible:Boolean},emits:["close"],setup(t,{emit:o}){const h=t,{t:g}=E(),f=z(),d=P(()=>f.Find(h.userId)),a=P(()=>h.visible?d.value?g("users.edit")+": "+d.value.Identifier:g("users.new"):""),i=y(I());function I(){return{Identifier:"",Email:"",Source:"",IsAdmin:!1,Firstname:"",Lastname:"",Phone:"",Department:"",Notes:"",Password:"",Disabled:!1}}M(()=>h.visible,async(p,l)=>{l===!1&&p===!0&&(d.value||await S())});async function S(){console.log("loading new user data..."),$({title:"Authorization",text:"You have been logged in!"}),$({title:"Authorization2",text:"You have been logged in!"}),$({title:"Authorization3",text:"You have been logged in!"})}function C(){i.value=I(),o("close")}return(p,l)=>(c(),L(N,{title:r(a),visible:t.visible,onClose:C},{default:U(()=>[e("fieldset",null,[Y,h.userId==="#NEW#"?(c(),u("div",G,[e("label",q,s(p.$t("modals.useredit.identifier")),1),m(e("input",{type:"text",class:"form-control",placeholder:"The user id","onUpdate:modelValue":l[0]||(l[0]=n=>i.value.Identifier=n)},null,512),[[v,i.value.Identifier]])])):_("v-if",!0),e("div",j,[e("label",R,s(p.$t("modals.useredit.source")),1),m(e("input",{type:"text",class:"form-control",placeholder:"The user source","onUpdate:modelValue":l[1]||(l[1]=n=>i.value.Source=n),disabled:"disabled"},null,512),[[v,i.value.Source]])]),i.value.Source==="db"?(c(),u("div",W,[e("label",J,s(p.$t("modals.useredit.password")),1),m(e("input",{type:"text",class:"form-control",placeholder:"Password","aria-describedby":"passwordHelp","onUpdate:modelValue":l[2]||(l[2]=n=>i.value.Password=n)},null,512),[[v,i.value.Password]]),Q])):_("v-if",!0)]),e("fieldset",null,[X,e("div",Z,[e("label",ee,s(p.$t("modals.useredit.email")),1),m(e("input",{type:"email",class:"form-control",placeholder:"Email","onUpdate:modelValue":l[3]||(l[3]=n=>i.value.Email=n)},null,512),[[v,i.value.Email]])]),e("div",te,[e("div",se,[e("label",le,s(p.$t("modals.useredit.firstname")),1),m(e("input",{type:"text",class:"form-control",placeholder:"Firstname","onUpdate:modelValue":l[4]||(l[4]=n=>i.value.Firstname=n)},null,512),[[v,i.value.Firstname]])]),e("div",oe,[e("label",ae,s(p.$t("modals.useredit.lastname")),1),m(e("input",{type:"text",class:"form-control",placeholder:"Lastname","onUpdate:modelValue":l[5]||(l[5]=n=>i.value.Lastname=n)},null,512),[[v,i.value.Lastname]])])]),e("div",ie,[e("div",ne,[e("label",re,s(p.$t("modals.useredit.phone")),1),m(e("input",{type:"text",class:"form-control",placeholder:"Phone","onUpdate:modelValue":l[6]||(l[6]=n=>i.value.Phone=n)},null,512),[[v,i.value.Phone]])]),e("div",de,[e("label",ce,s(p.$t("modals.useredit.department")),1),m(e("input",{type:"text",class:"form-control",placeholder:"Department","onUpdate:modelValue":l[7]||(l[7]=n=>i.value.Department=n)},null,512),[[v,i.value.Department]])])])]),e("fieldset",null,[ue,e("div",fe,[e("label",he,s(p.$t("modals.useredit.notes")),1),m(e("textarea",{class:"form-control",rows:"2","onUpdate:modelValue":l[8]||(l[8]=n=>i.value.Notes=n)},null,512),[[v,i.value.Notes]])])]),e("fieldset",null,[pe,e("div",me,[m(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":l[9]||(l[9]=n=>i.value.Disabled=n)},null,512),[[O,i.value.Disabled]]),_e]),e("div",ve,[m(e("input",{class:"form-check-input",type:"checkbox",checked:"","onUpdate:modelValue":l[10]||(l[10]=n=>i.value.IsAdmin=n)},null,512),[[O,i.value.IsAdmin]]),ge])])]),footer:U(()=>[be,$e,e("button",{onClick:k(C,["prevent"]),type:"button",class:"btn btn-secondary"},"Discard",8,ke)]),_:1},8,["title","visible"]))}},ye=F(Pe,[["__file","/home/h44z/workspace/go/wg-portal/cmd/wg-portal-spa/frontend/src/components/UserEditModal.vue"]]),we=e("legend",null,"Peer List",-1),Ie={key:0},Se={key:1,class:"table table-sm",id:"peerTable"},Ce={scope:"col"},Ve={scope:"col"},Ue={scope:"col"},De={scope:"col"},Ae={key:0,scope:"col"},Fe={scope:"col"},ze=e("th",{scope:"col"},null,-1),Oe={key:0},xe={class:"text-center"},Ee=["onClick"],Me=e("i",{class:"fas fa-eye me-2"},null,-1),Le=[Me],Ne=["onClick"],He=e("i",{class:"fas fa-cog"},null,-1),Te=[He],Be=["onClick"],Ke={__name:"UserViewModal",props:{userId:String,visible:Boolean},emits:["close"],setup(t,{emit:o}){const h=t,{t:g}=E(),f=z(),d=P(()=>f.Find(h.userId)),a=P(()=>h.visible?g("users.view")+": "+d.value.Identifier:""),i=P(()=>[]),I=y(S());function S(){return{Disabled:!1,IgnoreGlobalSettings:!0,Endpoint:{Value:"",Overridable:!1},AllowedIPsStr:{Value:"",Overridable:!1},ExtraAllowedIPsStr:"",PrivateKey:"",PublicKey:"",PresharedKey:"",PersistentKeepalive:{Value:0,Overridable:!1},DisplayName:"",Identifier:"",UserIdentifier:"",InterfaceConfig:{PublicKey:{Value:"",Overridable:!1},AddressStr:{Value:"",Overridable:!1},DnsStr:{Value:"",Overridable:!1},DnsSearchStr:{Value:"",Overridable:!1},Mtu:{Value:0,Overridable:!1},FirewallMark:{Value:0,Overridable:!1},RoutingTable:{Value:"",Overridable:!1},PreUp:{Value:"",Overridable:!1},PostUp:{Value:"",Overridable:!1},PreDown:{Value:"",Overridable:!1},PostDown:{Value:"",Overridable:!1}}}}M(()=>h.visible,async(l,n)=>{n===!1&&l===!0&&(d.value||await C())});async function C(){console.log("loading new user data..."),$({title:"Authorization",text:"You have been logged in!"}),$({title:"Authorization2",text:"You have been logged in!"}),$({title:"Authorization3",text:"You have been logged in!"})}function p(){I.value=S(),o("close")}return(l,n)=>(c(),L(N,{title:r(a),visible:t.visible,onClose:p},{default:U(()=>[e("fieldset",null,[we,r(i).length===0?(c(),u("div",Ie,[e("p",null,s(l.$t("users.nopeers.message")),1)])):_("v-if",!0),r(i).length!==0?(c(),u("table",Se,[e("thead",null,[e("tr",null,[e("th",Ce,s(l.$t("interfaces.tableHeadings[0]")),1),e("th",Ve,s(l.$t("interfaces.tableHeadings[1]")),1),e("th",Ue,s(l.$t("interfaces.tableHeadings[2]")),1),e("th",De,s(l.$t("interfaces.tableHeadings[3]")),1),l.interfaces.GetSelected.Mode==="client"?(c(),u("th",Ae,s(l.$t("interfaces.tableHeadings[4]")),1)):_("v-if",!0),e("th",Fe,s(l.$t("interfaces.tableHeadings[5]")),1),ze,_(" Actions ")])]),e("tbody",null,[(c(!0),u(w,null,D(r(i),b=>(c(),u("tr",{key:b.Identifier},[e("td",null,s(b.Name),1),e("td",null,s(b.Identifier),1),e("td",null,s(b.User),1),e("td",null,[(c(!0),u(w,null,D(b.IPs,V=>(c(),u("span",{key:V,class:"badge rounded-pill bg-light"},s(V),1))),128))]),l.interfaces.GetSelected.Mode==="client"?(c(),u("td",Oe,s(b.Endpoint),1)):_("v-if",!0),e("td",null,s(b.LastConnected),1),e("td",xe,[e("a",{onClick:k(V=>l.viewedPeerId=b.Identifier,["prevent"]),href:"#",title:"Download config"},Le,8,Ee),e("a",{onClick:k(V=>l.editPeerId=b.Identifier,["prevent"]),href:"#",title:"Email config"},Te,8,Ne)])]))),128))])])):_("v-if",!0)])]),footer:U(()=>[e("button",{onClick:k(p,["prevent"]),type:"button",class:"btn btn-primary"},"Close",8,Be)]),_:1},8,["title","visible"]))}},Ye=F(Ke,[["__file","/home/h44z/workspace/go/wg-portal/cmd/wg-portal-spa/frontend/src/components/UserViewModal.vue"]]),Ge={class:"mt-4 row"},qe={class:"col-12 col-lg-5"},je={class:"col-12 col-lg-4 text-lg-end"},Re={class:"form-group d-inline"},We={class:"input-group mb-3"},Je=e("button",{class:"input-group-text btn btn-primary",title:"Search"},[e("i",{class:"fa-solid fa-search"})],-1),Qe=K('<div class="col-12 col-lg-3 text-lg-end"><a class="btn btn-primary" href="#" title="Send mail to selected users"><i class="fa fa-paper-plane"></i></a><a class="btn btn-primary ms-2" href="#" title="Add multiple users"><i class="fa fa-plus me-1"></i><i class="fa fa-users"></i></a><a class="btn btn-primary ms-2" href="#" title="Add a user"><i class="fa fa-plus me-1"></i><i class="fa fa-user"></i></a></div>',1),Xe={class:"mt-2 table-responsive"},Ze={key:0},et={key:1,class:"table table-sm",id:"userTable"},tt=e("th",{scope:"col"},[e("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault",title:"Select all"})],-1),st={scope:"col"},lt={scope:"col"},ot={scope:"col"},at={scope:"col"},it={scope:"col",class:"text-center"},nt={scope:"col",class:"text-center"},rt={scope:"col",class:"text-center"},dt=e("th",{scope:"col"},null,-1),ct=e("th",{scope:"row"},[e("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault"})],-1),ut={class:"text-center"},ft={class:"badge rounded-pill bg-light"},ht={class:"text-center"},pt={class:"text-center"},mt={key:0,class:"text-danger"},_t=e("i",{class:"fa fa-check-circle"},null,-1),vt=[_t],gt={key:1},bt=e("i",{class:"fa fa-circle-xmark"},null,-1),$t=[bt],kt={class:"text-center"},Pt=["onClick"],yt=e("i",{class:"fa-solid fa-magnifying-glass me-2"},null,-1),wt=[yt],It=["onClick"],St=e("i",{class:"fas fa-cog me-2"},null,-1),Ct=[St],Vt=e("hr",null,null,-1),Ut={class:"mt-3"},Dt={class:"row"},At={class:"col-6"},Ft={class:"pagination pagination-sm"},zt=["onClick"],Ot={class:"col-6"},xt={class:"form-group row"},Et={for:"paginationSelector",class:"col-sm-6 col-form-label text-end"},Mt={class:"col-sm-6"},Lt=e("option",{value:"10"},"10",-1),Nt=e("option",{value:"25"},"25",-1),Ht=e("option",{value:"50"},"50",-1),Tt=e("option",{value:"100"},"100",-1),Bt={value:"999999999"},Kt={__name:"UserView",setup(t){const o=z();y("close");const h=y(""),g=y("");return T(()=>{o.fetch()}),(f,d)=>(c(),u(w,null,[x(ye,{userId:h.value,visible:h.value!=="",onClose:d[0]||(d[0]=a=>h.value="")},null,8,["userId","visible"]),x(Ye,{userId:g.value,visible:g.value!=="",onClose:d[1]||(d[1]=a=>g.value="")},null,8,["userId","visible"]),_(" User list "),e("div",Ge,[e("div",qe,[e("h1",null,s(f.$t("user.h1")),1)]),e("div",je,[e("div",Re,[e("div",We,[m(e("input",{type:"text",class:"form-control",placeholder:"Search...","onUpdate:modelValue":d[2]||(d[2]=a=>r(o).filter=a),onKeyup:d[3]||(d[3]=(...a)=>r(o).afterPageSizeChange&&r(o).afterPageSizeChange(...a))},null,544),[[v,r(o).filter]]),Je])])]),Qe]),e("div",Xe,[r(o).Count===0?(c(),u("div",Ze,[e("h4",null,s(f.$t("users.noUsers.h4")),1),e("p",null,s(f.$t("users.noUsers.message")),1)])):_("v-if",!0),r(o).Count!==0?(c(),u("table",et,[e("thead",null,[e("tr",null,[tt,_(" select "),e("th",st,s(f.$t("user.id")),1),e("th",lt,s(f.$t("user.email")),1),e("th",ot,s(f.$t("user.firstname")),1),e("th",at,s(f.$t("user.lastname")),1),e("th",it,s(f.$t("user.source")),1),e("th",nt,s(f.$t("user.peers")),1),e("th",rt,s(f.$t("user.admin")),1),dt,_(" Actions ")])]),e("tbody",null,[(c(!0),u(w,null,D(r(o).FilteredAndPaged,a=>(c(),u("tr",{key:a.Identifier},[ct,e("td",null,s(a.Identifier),1),e("td",null,s(a.Email),1),e("td",null,s(a.Firstname),1),e("td",null,s(a.Lastname),1),e("td",ut,[e("span",ft,s(a.Source),1)]),e("td",ht,s(a.Peers),1),e("td",pt,[a.IsAdmin?(c(),u("span",mt,vt)):(c(),u("span",gt,$t))]),e("td",kt,[e("a",{onClick:k(i=>g.value=a.Identifier,["prevent"]),href:"#",title:"Show user"},wt,8,Pt),e("a",{onClick:k(i=>h.value=a.Identifier,["prevent"]),href:"#",title:"Edit user"},Ct,8,It)])]))),128))])])):_("v-if",!0)]),Vt,e("div",Ut,[e("div",Dt,[e("div",At,[e("ul",Ft,[e("li",{class:A(["page-item",{disabled:r(o).pageOffset===0}])},[e("a",{class:"page-link",onClick:d[4]||(d[4]=(...a)=>r(o).previousPage&&r(o).previousPage(...a))},"\xAB")],2),(c(!0),u(w,null,D(r(o).pages,a=>(c(),u("li",{key:a,class:A(["page-item",{active:r(o).currentPage===a}])},[e("a",{class:"page-link",onClick:i=>r(o).gotoPage(a)},s(a),9,zt)],2))),128)),e("li",{class:A(["page-item",{disabled:!r(o).hasNextPage}])},[e("a",{class:"page-link",onClick:d[5]||(d[5]=(...a)=>r(o).nextPage&&r(o).nextPage(...a))},"\xBB")],2)])]),e("div",Ot,[e("div",xt,[e("label",Et,s(f.$t("interfaces.pagination.size"))+":",1),e("div",Mt,[m(e("select",{class:"form-select","onUpdate:modelValue":d[6]||(d[6]=a=>r(o).pageSize=a),onClick:d[7]||(d[7]=a=>r(o).afterPageSizeChange())},[Lt,Nt,Ht,Tt,e("option",Bt,s(f.$t("interfaces.pagination.all")),1)],512),[[B,r(o).pageSize,void 0,{number:!0}]])])])])])])],64))}},Gt=F(Kt,[["__file","/home/h44z/workspace/go/wg-portal/cmd/wg-portal-spa/frontend/src/views/UserView.vue"]]);export{Gt as default};
